// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: employees.sql

package generated

import (
	"context"
	"time"
)

const createEmployee = `-- name: CreateEmployee :one
insert into employees(name) values ($1) returning employee_id, name, created_at, updated_at, deleted_at
`

// Create new employee
func (q *Queries) CreateEmployee(ctx context.Context, name string) (Employee, error) {
	row := q.db.QueryRow(ctx, createEmployee, name)
	var i Employee
	err := row.Scan(
		&i.EmployeeID,
		&i.Name,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const deleteEmployee = `-- name: DeleteEmployee :exec
delete from employees where employee_id = $1
`

// Delete employee
func (q *Queries) DeleteEmployee(ctx context.Context, employeeID int32) error {
	_, err := q.db.Exec(ctx, deleteEmployee, employeeID)
	return err
}

const getEmployeeByemployee_id = `-- name: GetEmployeeByemployee_id :one
select employee_id, name, created_at, updated_at, deleted_at from employees e where employee_id = $1 and e.deleted_at is null
`

// Get single employee by employee_id
func (q *Queries) GetEmployeeByemployee_id(ctx context.Context, employeeID int32) (Employee, error) {
	row := q.db.QueryRow(ctx, getEmployeeByemployee_id, employeeID)
	var i Employee
	err := row.Scan(
		&i.EmployeeID,
		&i.Name,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const getEmployeesPaginated = `-- name: GetEmployeesPaginated :many
select employee_id, name, created_at, updated_at, deleted_at,count(*) as total_count   from employees e
where e.deleted_at is null
order by employee_id
limit $1 offset $2
`

type GetEmployeesPaginatedParams struct {
	Limit  int32
	Offset int32
}

type GetEmployeesPaginatedRow struct {
	EmployeeID int32
	Name       string
	CreatedAt  time.Time
	UpdatedAt  time.Time
	DeletedAt  time.Time
	TotalCount int64
}

// Get paginated employees list
func (q *Queries) GetEmployeesPaginated(ctx context.Context, arg GetEmployeesPaginatedParams) ([]GetEmployeesPaginatedRow, error) {
	rows, err := q.db.Query(ctx, getEmployeesPaginated, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetEmployeesPaginatedRow
	for rows.Next() {
		var i GetEmployeesPaginatedRow
		if err := rows.Scan(
			&i.EmployeeID,
			&i.Name,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.DeletedAt,
			&i.TotalCount,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateEmployee = `-- name: UpdateEmployee :exec
update employees set name = $2 where employee_id = $1
`

type UpdateEmployeeParams struct {
	EmployeeID int32
	Name       string
}

// Update employee name
func (q *Queries) UpdateEmployee(ctx context.Context, arg UpdateEmployeeParams) error {
	_, err := q.db.Exec(ctx, updateEmployee, arg.EmployeeID, arg.Name)
	return err
}
