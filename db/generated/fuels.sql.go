// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: fuels.sql

package generated

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createFuel = `-- name: CreateFuel :one
insert into fuels(name,supplier,price)
values ($1,$2,$3)
returning fuel_id, name, supplier, price, created_at, updated_at, deleted_at
`

type CreateFuelParams struct {
	Name     string
	Supplier pgtype.Text
	Price    pgtype.Numeric
}

// Create new fuel type
func (q *Queries) CreateFuel(ctx context.Context, arg CreateFuelParams) (Fuel, error) {
	row := q.db.QueryRow(ctx, createFuel, arg.Name, arg.Supplier, arg.Price)
	var i Fuel
	err := row.Scan(
		&i.FuelID,
		&i.Name,
		&i.Supplier,
		&i.Price,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const deleteFuel = `-- name: DeleteFuel :exec
DELETE from fuels where fuel_id = $1
`

// Delete fuel type
func (q *Queries) DeleteFuel(ctx context.Context, fuelID int32) error {
	_, err := q.db.Exec(ctx, deleteFuel, fuelID)
	return err
}

const getFuelByfuel_id = `-- name: GetFuelByfuel_id :one
select fuel_id, name, supplier, price, created_at, updated_at, deleted_at from fuels f where fuel_id = $1 and f.deleted_at is null
`

// Get single fuel type by fuel_id
func (q *Queries) GetFuelByfuel_id(ctx context.Context, fuelID int32) (Fuel, error) {
	row := q.db.QueryRow(ctx, getFuelByfuel_id, fuelID)
	var i Fuel
	err := row.Scan(
		&i.FuelID,
		&i.Name,
		&i.Supplier,
		&i.Price,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const getFuelsPaginated = `-- name: GetFuelsPaginated :many
select fuel_id, name, supplier, price, created_at, updated_at, deleted_at,count(*) as total_count   from fuels f
where f.deleted_at is null
order by fuel_id
limit $1 offset $2
`

type GetFuelsPaginatedParams struct {
	Limit  int32
	Offset int32
}

type GetFuelsPaginatedRow struct {
	FuelID     int32
	Name       string
	Supplier   pgtype.Text
	Price      pgtype.Numeric
	CreatedAt  pgtype.Timestamp
	UpdatedAt  pgtype.Timestamp
	DeletedAt  pgtype.Timestamp
	TotalCount int64
}

// Get paginated fuel types list
func (q *Queries) GetFuelsPaginated(ctx context.Context, arg GetFuelsPaginatedParams) ([]GetFuelsPaginatedRow, error) {
	rows, err := q.db.Query(ctx, getFuelsPaginated, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetFuelsPaginatedRow
	for rows.Next() {
		var i GetFuelsPaginatedRow
		if err := rows.Scan(
			&i.FuelID,
			&i.Name,
			&i.Supplier,
			&i.Price,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.DeletedAt,
			&i.TotalCount,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateFuel = `-- name: UpdateFuel :exec
Update fuels
set
name = coalesce($2, name),
supplier = coalesce($3,supplier),
price = coalesce($4, price)
where fuel_id = $1
`

type UpdateFuelParams struct {
	FuelID   int32
	Name     string
	Supplier pgtype.Text
	Price    pgtype.Numeric
}

// Update fuel type fields
func (q *Queries) UpdateFuel(ctx context.Context, arg UpdateFuelParams) error {
	_, err := q.db.Exec(ctx, updateFuel,
		arg.FuelID,
		arg.Name,
		arg.Supplier,
		arg.Price,
	)
	return err
}
